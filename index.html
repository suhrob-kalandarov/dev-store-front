<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Dev Store - Mobile</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #333);
            line-height: 1.5;
            font-weight: 400;
            padding-bottom: 80px;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Desktop Layout */
        @media (min-width: 768px) {
            body {
                padding-bottom: 0;
                display: flex;
                min-height: 100vh;
            }
        }

        /* Desktop Sidebar Navigation */
        .desktop-sidebar {
            display: none;
            width: 280px;
            background: #2c3e50;
            color: white;
            flex-shrink: 0;
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        @media (min-width: 768px) {
            .desktop-sidebar {
                display: block;
            }
        }

        .sidebar-header {
            padding: 30px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            text-align: center;
        }

        .sidebar-logo {
            font-size: 32px;
            font-weight: 800;
            margin-bottom: 10px;
            letter-spacing: -1px;
        }

        .sidebar-subtitle {
            font-size: 14px;
            opacity: 0.7;
        }

        .sidebar-profile {
            padding: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .sidebar-profile:hover {
            background: rgba(255,255,255,0.1);
        }

        .sidebar-profile-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .sidebar-profile-placeholder {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: 600;
        }

        .sidebar-profile-info h4 {
            font-size: 16px;
            margin-bottom: 2px;
        }

        .sidebar-profile-info p {
            font-size: 12px;
            opacity: 0.7;
        }

        .sidebar-nav {
            padding: 20px 0;
        }

        .sidebar-nav-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            color: white;
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .sidebar-nav-item:hover {
            background: rgba(255,255,255,0.1);
            border-left-color: white;
        }

        .sidebar-nav-item.active {
            background: rgba(255,255,255,0.15);
            border-left-color: white;
        }

        .sidebar-nav-item i {
            font-size: 18px;
            width: 20px;
        }

        .sidebar-cart {
            margin-top: auto;
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .sidebar-cart-btn {
            width: 100%;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            padding: 15px;
            border-radius: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .sidebar-cart-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        /* Desktop Main Content */
        .desktop-main {
            flex: 1;
            margin-left: 0;
        }

        @media (min-width: 768px) {
            .desktop-main {
                margin-left: 280px;
            }
        }

        /* Mobile Header */
        .mobile-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: #2c3e50;
            padding: 15px 20px;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        @media (min-width: 768px) {
            .mobile-header {
                display: none;
            }
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .menu-btn {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .menu-btn:active {
            background: rgba(255,255,255,0.1);
        }

        .logo {
            font-size: 24px;
            font-weight: 800;
            color: white;
            text-decoration: none;
            letter-spacing: -1px;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header-icon {
            color: white;
            font-size: 18px;
            padding: 8px;
            border-radius: 8px;
            transition: background 0.3s ease;
            position: relative;
            cursor: pointer;
        }

        .header-icon:active {
            background: rgba(255,255,255,0.1);
        }

        .cart-badge {
            position: absolute;
            top: 2px;
            right: 2px;
            background: #ff4757;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        /* Profile Avatar */
        .profile-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 2px solid white;
            object-fit: cover;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-avatar:active {
            transform: scale(0.95);
        }

        .profile-placeholder {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-placeholder:active {
            background: rgba(255,255,255,0.3);
        }

        /* Main Content */
        .main-content {
            margin-top: 70px;
            padding-bottom: 20px;
        }

        @media (min-width: 768px) {
            .main-content {
                margin-top: 0;
                padding: 40px;
                max-width: 1400px;
                margin-left: auto;
                margin-right: auto;
            }
        }

        /* Enhanced Hero Section */
        .hero-section {
            position: relative;
            height: 50vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            color: white;
            margin-bottom: 20px;
            border-radius: 0;
            padding: 20px;
        }

        @media (min-width: 768px) {
            .hero-section {
                height: 60vh;
                border-radius: 20px;
                margin-bottom: 40px;
                padding: 40px;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 40px;
                align-items: center;
            }
        }

        .hero-content {
            position: relative;
            z-index: 2;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }

        @media (min-width: 768px) {
            .hero-content {
                text-align: left;
                padding: 40px;
            }
        }

        .hero-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 15px;
            display: inline-block;
            letter-spacing: 1px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        @media (min-width: 768px) {
            .hero-badge {
                font-size: 14px;
                padding: 10px 20px;
            }
        }

        .hero-title {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 20px;
            letter-spacing: -1px;
        }

        @media (min-width: 768px) {
            .hero-title {
                font-size: 4rem;
                margin-bottom: 30px;
            }
        }

        .hero-btn {
            background: white;
            color: #333;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 12px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .hero-btn {
                padding: 16px 32px;
                font-size: 14px;
            }

            .hero-btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            }
        }

        .hero-btn:active {
            transform: translateY(1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .hero-image {
            display: none;
        }

        @media (min-width: 768px) {
            .hero-image {
                display: block;
                background: rgba(255, 255, 255, 0.1);
                backdrop-filter: blur(10px);
                border-radius: 20px;
                padding: 20px;
                border: 1px solid rgba(255, 255, 255, 0.2);
                overflow: hidden;
            }

            .hero-image img {
                width: 100%;
                height: 400px;
                object-fit: cover;
                border-radius: 15px;
            }
        }

        /* Section Headers */
        .section-header {
            padding: 20px;
            text-align: center;
            background: #f8f9fa;
            margin-bottom: 20px;
            border-radius: 0;
        }

        @media (min-width: 768px) {
            .section-header {
                padding: 40px;
                border-radius: 15px;
                margin-bottom: 40px;
            }
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 800;
            color: #333;
            margin-bottom: 8px;
        }

        @media (min-width: 768px) {
            .section-title {
                font-size: 2.5rem;
            }
        }

        .section-subtitle {
            color: #666;
            font-size: 14px;
        }

        @media (min-width: 768px) {
            .section-subtitle {
                font-size: 16px;
            }
        }

        /* Collection Section */
        .collection-section {
            padding: 20px;
            background: #f8f9fa;
            margin-bottom: 20px;
            border-radius: 0;
            display: flex;
            flex-direction: column;
        }

        @media (min-width: 768px) {
            .collection-section {
                padding: 40px;
                border-radius: 20px;
                margin-bottom: 40px;
                display: grid;
                grid-template-columns: 1fr 1fr;
                grid-template-areas:
      "content image"
      "products products";
                gap: 40px;
                align-items: center;
            }
        }

        .collection-main-image {
            position: relative;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
            order: 3;
        }

        @media (min-width: 768px) {
            .collection-main-image {
                margin-bottom: 0;
                grid-area: image;
            }
        }

        .collection-main-image img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        @media (min-width: 768px) {
            .collection-main-image img {
                height: 400px;
            }
        }

        .collection-content {
            order: 1;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .collection-content {
                grid-area: content;
                margin-bottom: 0;
            }
        }

        .collection-products {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            order: 2;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .collection-products {
                grid-area: products;
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
                margin-bottom: 0;
            }
        }

        .collection-badge {
            background: #333;
            color: white;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            display: inline-block;
        }

        .collection-title {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 15px;
            color: #333;
            line-height: 1.2;
        }

        @media (min-width: 768px) {
            .collection-title {
                font-size: 2.5rem;
                margin-bottom: 25px;
            }
        }

        .collection-btn {
            background: transparent;
            border: 2px solid #333;
            color: #333;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 12px;
            transition: all 0.3s ease;
            margin-bottom: 20px;
            width: 100%;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .collection-btn {
                width: auto;
                padding: 15px 30px;
                font-size: 14px;
            }

            .collection-btn:hover {
                background: #333;
                color: white;
                transform: translateY(-2px);
            }
        }

        .collection-btn:active {
            background: #333;
            color: white;
        }

        .collection-product {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        @media (min-width: 768px) {
            .collection-product:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 25px rgba(0,0,0,0.15);
            }

            .collection-product:hover .collection-product-overlay {
                opacity: 1;
            }
        }

        .collection-product:active {
            transform: translateY(2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .collection-product-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 2;
        }

        .quick-view-btn {
            background: white;
            color: #333;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-view-btn:hover {
            background: #f0f0f0;
        }

        .collection-product-image {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        @media (min-width: 768px) {
            .collection-product-image {
                height: 200px;
            }
        }

        .collection-product-info {
            padding: 12px;
            text-align: center;
        }

        @media (min-width: 768px) {
            .collection-product-info {
                padding: 20px;
            }
        }

        .collection-product-name {
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 5px;
            color: #333;
        }

        @media (min-width: 768px) {
            .collection-product-name {
                font-size: 14px;
            }
        }

        .collection-product-price {
            font-size: 14px;
            font-weight: 700;
            color: #333;
        }

        @media (min-width: 768px) {
            .collection-product-price {
                font-size: 16px;
            }
        }

        /* Filter Section */
        .filter-section {
            background: white;
            padding: 15px 20px;
            border-bottom: 1px solid #e9ecef;
            position: sticky;
            top: 70px;
            z-index: 90;
        }

        @media (min-width: 768px) {
            .filter-section {
                position: static;
                padding: 30px 40px;
                border-radius: 15px;
                margin-bottom: 30px;
                box-shadow: 0 2px 10px rgba(0,0,0,0.05);
                border: none;
            }
        }

        .filter-scroll {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
        }

        @media (min-width: 768px) {
            .filter-scroll {
                justify-content: center;
                overflow-x: visible;
                gap: 15px;
            }
        }

        .filter-scroll::-webkit-scrollbar {
            display: none;
        }

        .filter-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            white-space: nowrap;
            transition: all 0.3s ease;
            min-width: fit-content;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .filter-btn {
                padding: 12px 24px;
                font-size: 14px;
            }

            .filter-btn:hover {
                background: #e9ecef;
                transform: translateY(-1px);
            }
        }

        .filter-btn.active {
            background: #333;
            color: white;
            border-color: #333;
        }

        .search-container {
            margin-top: 15px;
        }

        @media (min-width: 768px) {
            .search-container {
                margin-top: 25px;
                max-width: 500px;
                margin-left: auto;
                margin-right: auto;
            }
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #ddd;
            border-radius: 25px;
            font-size: 14px;
            background: #f8f9fa;
            transition: all 0.3s ease;
        }

        @media (min-width: 768px) {
            .search-input {
                padding: 15px 20px;
                font-size: 16px;
            }
        }

        .search-input:focus {
            outline: none;
            border-color: #333;
            background: white;
            box-shadow: 0 0 0 3px rgba(51, 51, 51, 0.1);
        }

        /* Product Grid */
        .products-grid {
            padding: 20px;
        }

        @media (min-width: 768px) {
            .products-grid {
                padding: 0;
            }
        }

        .products-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .products-container {
                grid-template-columns: repeat(3, 1fr);
                gap: 30px;
            }
        }

        @media (min-width: 1200px) {
            .products-container {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .product-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            position: relative;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .product-card:hover {
                transform: translateY(-8px);
                box-shadow: 0 12px 30px rgba(0,0,0,0.15);
            }
        }

        .product-card:active {
            transform: translateY(2px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
        }

        .product-image-container {
            position: relative;
            width: 100%;
            height: 180px;
            overflow: hidden;
        }

        @media (min-width: 768px) {
            .product-image-container {
                height: 250px;
            }
        }

        .product-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: all 0.3s ease;
        }

        .product-image-secondary {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: all 0.3s ease;
        }

        @media (min-width: 768px) {
            .product-card:hover .product-image {
                opacity: 0;
            }

            .product-card:hover .product-image-secondary {
                opacity: 1;
            }
        }

        .product-card:active .product-image {
            opacity: 0;
        }

        .product-card:active .product-image-secondary {
            opacity: 1;
        }

        .product-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: #ff4757;
            color: white;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 9px;
            font-weight: 700;
            text-transform: uppercase;
            z-index: 2;
        }

        .product-info {
            padding: 15px;
        }

        @media (min-width: 768px) {
            .product-info {
                padding: 20px;
            }
        }

        .product-name {
            font-size: 14px;
            font-weight: 700;
            margin-bottom: 10px;
            color: #333;
            line-height: 1.2;
        }

        @media (min-width: 768px) {
            .product-name {
                font-size: 16px;
                margin-bottom: 15px;
            }
        }

        .product-price {
            font-size: 16px;
            font-weight: 800;
            color: #333;
            margin-bottom: 12px;
        }

        @media (min-width: 768px) {
            .product-price {
                font-size: 18px;
                margin-bottom: 15px;
            }
        }

        .quick-view-product-btn {
            background: #333;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .quick-view-product-btn {
                padding: 12px 20px;
                font-size: 14px;
            }

            .quick-view-product-btn:hover {
                background: #555;
                transform: translateY(-1px);
            }
        }

        .quick-view-product-btn:active {
            background: #555;
            transform: translateY(1px);
        }

        /* Profile Modal */
        .profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            display: none;
            align-items: flex-end;
            justify-content: center;
        }

        @media (min-width: 768px) {
            .profile-modal {
                align-items: center;
            }
        }

        .profile-modal.active {
            display: flex;
        }

        .profile-content {
            background: white;
            border-radius: 20px 20px 0 0;
            width: 100%;
            max-height: 70vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @media (min-width: 768px) {
            .profile-content {
                border-radius: 20px;
                width: 500px;
                max-height: 80vh;
                animation: scaleIn 0.3s ease;
            }
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        @keyframes scaleIn {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .profile-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
            border-radius: 20px 20px 0 0;
        }

        @media (min-width: 768px) {
            .profile-header {
                border-radius: 20px 20px 0 0;
            }
        }

        .profile-title {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
        }

        .close-cart {
            background: none;
            border: none;
            font-size: 24px;
            color: #333;
            padding: 8px;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        @media (min-width: 768px) {
            .close-cart:hover {
                background: #f0f0f0;
            }
        }

        .close-cart:active {
            background: #e9ecef;
        }

        .profile-body {
            padding: 20px;
        }

        @media (min-width: 768px) {
            .profile-body {
                padding: 30px;
            }
        }

        .profile-info {
            text-align: center;
            margin-bottom: 30px;
        }

        .profile-avatar-large {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 15px;
            object-fit: cover;
            border: 3px solid #f0f0f0;
        }

        .profile-avatar-placeholder {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #f0f0f0;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: #666;
        }

        .profile-name {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 5px;
            color: #333;
        }

        .profile-username {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .profile-status {
            display: inline-block;
            background: #e8f5e8;
            color: #2d5a2d;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .profile-stat {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        @media (min-width: 768px) {
            .profile-stat {
                padding: 20px;
            }
        }

        .profile-stat-value {
            font-size: 20px;
            font-weight: 800;
            color: #333;
            margin-bottom: 5px;
        }

        .profile-stat-label {
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .profile-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .profile-action-btn {
            background: white;
            border: 1px solid #ddd;
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .profile-action-btn:hover {
                background: #f8f9fa;
                transform: translateY(-1px);
            }
        }

        .profile-action-btn:active {
            background: #f8f9fa;
        }

        .profile-action-btn i {
            color: #666;
        }

        /* Enhanced Quick View Modal */
        .quick-view-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
            display: none;
            align-items: flex-end;
            justify-content: center;
        }

        @media (min-width: 768px) {
            .quick-view-modal {
                align-items: center;
            }
        }

        .quick-view-modal.active {
            display: flex;
        }

        .quick-view-content {
            background: white;
            border-radius: 20px 20px 0 0;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @media (min-width: 768px) {
            .quick-view-content {
                border-radius: 20px;
                width: 900px;
                max-height: 85vh;
                animation: scaleIn 0.3s ease;
            }
        }

        .quick-view-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
            border-radius: 20px 20px 0 0;
        }

        .quick-view-title {
            font-size: 18px;
            font-weight: 700;
            margin: 0;
        }

        .quick-view-body {
            padding: 20px;
        }

        @media (min-width: 768px) {
            .quick-view-body {
                padding: 30px;
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 40px;
            }
        }

        .quick-view-images-container {
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .quick-view-images-container {
                margin-bottom: 0;
            }
        }

        .quick-view-main-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-radius: 15px;
            margin-bottom: 15px;
        }

        @media (min-width: 768px) {
            .quick-view-main-image {
                height: 400px;
            }
        }

        .quick-view-thumbnails {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            padding-bottom: 5px;
        }

        .quick-view-thumbnail {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .quick-view-thumbnail.active {
            border-color: #333;
        }

        .quick-view-thumbnail:hover {
            border-color: #666;
        }

        .quick-view-details-container {
            overflow-y: auto;
            max-height: 500px;
        }

        .quick-view-category {
            color: #666;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .quick-view-name {
            font-size: 1.5rem;
            font-weight: 800;
            margin-bottom: 10px;
            color: #333;
            line-height: 1.2;
        }

        @media (min-width: 768px) {
            .quick-view-name {
                font-size: 2rem;
            }
        }

        .quick-view-price {
            font-size: 1.3rem;
            font-weight: 800;
            color: #333;
            margin-bottom: 15px;
        }

        @media (min-width: 768px) {
            .quick-view-price {
                font-size: 1.5rem;
            }
        }

        .quick-view-description {
            color: #666;
            line-height: 1.5;
            margin-bottom: 20px;
            font-size: 14px;
        }

        .quick-view-divider {
            height: 1px;
            background: #eee;
            margin: 20px 0;
        }

        .quick-view-section {
            margin-bottom: 20px;
        }

        .quick-view-section-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .quick-view-color-value {
            color: #666;
            font-weight: 400;
        }

        .quick-view-colors {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-view-color {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .quick-view-color.active {
            border-color: #333;
            transform: scale(1.05);
        }

        .quick-view-color img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .quick-view-sizes {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .quick-view-size {
            padding: 8px 16px;
            border: 1px solid #ddd;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .quick-view-size.active {
            background: #333;
            color: white;
            border-color: #333;
        }

        .quick-view-size:hover {
            background: #f0f0f0;
        }

        .quick-view-quantity {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .quick-view-quantity-label {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        .quick-view-quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quick-view-qty-btn {
            width: 32px;
            height: 32px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-view-qty-btn:hover {
            background: #f0f0f0;
        }

        .quick-view-qty-btn:active {
            background: #333;
            color: white;
            border-color: #333;
        }

        .quick-view-qty-value {
            width: 50px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 5px;
            font-weight: 600;
        }

        .quick-view-add-btn {
            background: #333;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 25px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 14px;
            width: 100%;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .quick-view-add-btn:hover {
                background: #555;
                transform: translateY(-1px);
            }
        }

        .quick-view-add-btn:active {
            background: #555;
            transform: translateY(1px);
        }

        .quick-view-info {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .quick-view-info-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #666;
            font-size: 14px;
        }

        .quick-view-info-item i {
            width: 16px;
            text-align: center;
        }

        /* Enhanced Cart Sidebar - Fixed Mobile Issues */
        .cart-sidebar {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            height: 100vh;
            background: white;
            transition: right 0.3s ease;
            z-index: 1001;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* Mobile: Full screen overlay */
        @media (max-width: 767px) {
            .cart-sidebar {
                right: -100%;
                left: 0;
                width: 100%;
            }

            .cart-sidebar.open {
                right: 0;
            }
        }

        /* Tablet: Centered modal */
        @media (min-width: 768px) and (max-width: 1023px) {
            .cart-sidebar {
                left: 50%;
                right: auto;
                width: 500px;
                max-width: 90vw;
                transform: translateX(-50%) translateY(-50%) scale(0.9);
                border-radius: 20px;
                top: 50%;
                height: 80vh;
                max-height: 600px;
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                transition: all 0.3s ease;
                opacity: 0;
                visibility: hidden;
            }

            .cart-sidebar.open {
                opacity: 1;
                visibility: visible;
                transform: translateX(-50%) translateY(-50%) scale(1);
            }
        }

        /* Desktop: Right sidebar */
        @media (min-width: 1024px) {
            .cart-sidebar {
                width: 450px;
                right: -450px;
            }

            .cart-sidebar.open {
                right: 0;
            }
        }

        .cart-header {
            padding: 25px 25px 20px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            flex-shrink: 0;
        }

        .cart-header h5 {
            font-weight: 700;
            font-size: 20px;
            margin: 0;
            color: #333;
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 0 25px;
        }

        .cart-item {
            display: flex;
            gap: 15px;
            padding: 20px 0;
            border-bottom: 1px solid #f5f5f5;
            position: relative;
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-image {
            width: 90px;
            height: 120px;
            border-radius: 12px;
            overflow: hidden;
            flex-shrink: 0;
            background: #f8f9fa;
        }

        .cart-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .cart-item-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .cart-item-name {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 8px;
            color: #333;
            line-height: 1.3;
        }

        .cart-item-variant {
            font-size: 14px;
            color: #666;
            margin-bottom: 4px;
        }

        .cart-item-size {
            font-size: 14px;
            color: #666;
            margin-bottom: 12px;
        }

        .cart-item-price {
            font-size: 16px;
            font-weight: 700;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .cart-item-quantity {
            font-size: 16px;
            font-weight: 700;
            color: #333;
        }

        .cart-item-remove {
            position: absolute;
            top: 15px;
            right: 0;
            background: none;
            border: none;
            color: #999;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cart-item-remove:hover {
            background: #f5f5f5;
            color: #ff4757;
        }

        .cart-total {
            padding: 25px;
            border-top: 1px solid #f0f0f0;
            background: white;
            flex-shrink: 0;
        }

        .cart-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-size: 18px;
            font-weight: 700;
            color: #333;
        }

        .cart-buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }

        .checkout-btn {
            background: #333;
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 14px;
            flex: 1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkout-btn:hover {
            background: #555;
            transform: translateY(-1px);
        }

        .checkout-btn:active {
            background: #555;
            transform: translateY(1px);
        }

        .continue-shopping-btn {
            background: white;
            color: #333;
            border: 2px solid #333;
            padding: 14px 24px;
            border-radius: 25px;
            font-weight: 600;
            font-size: 14px;
            flex: 1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .continue-shopping-btn:hover {
            background: #f8f9fa;
            transform: translateY(-1px);
        }

        .continue-shopping-btn:active {
            background: #f0f0f0;
            transform: translateY(1px);
        }

        .cart-continue {
            text-align: center;
            color: #999;
            font-size: 14px;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .cart-continue:hover {
            color: #666;
        }

        /* Empty Cart State */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #999;
        }

        .empty-state i {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 16px;
            color: #666;
        }

        /* Pagination */
        .pagination-section {
            text-align: center;
            padding: 20px;
        }

        @media (min-width: 768px) {
            .pagination-section {
                padding: 40px 0;
            }
        }

        .pagination-btn {
            background: white;
            border: 1px solid #ddd;
            padding: 10px 14px;
            margin: 0 2px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s ease;
            min-width: 44px;
            cursor: pointer;
        }

        @media (min-width: 768px) {
            .pagination-btn {
                padding: 12px 16px;
                margin: 0 4px;
            }

            .pagination-btn:hover {
                background: #f0f0f0;
                transform: translateY(-1px);
            }
        }

        .pagination-btn:active,
        .pagination-btn.active {
            background: #333;
            color: white;
            border-color: #333;
        }

        /* Mobile Navigation */
        .mobile-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #e9ecef;
            padding: 8px 0;
            z-index: 100;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        @media (min-width: 768px) {
            .mobile-nav {
                display: none;
            }
        }

        .mobile-nav-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
        }

        .mobile-nav-item {
            text-align: center;
            color: #666;
            text-decoration: none;
            font-size: 10px;
            font-weight: 600;
            padding: 8px 12px;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            min-width: 60px;
        }

        .mobile-nav-item.active {
            color: #2c3e50;
            background: rgba(44, 62, 80, 0.1);
        }

        .mobile-nav-item:active {
            background: rgba(44, 62, 80, 0.2);
        }

        .mobile-nav-item i {
            font-size: 18px;
            margin-bottom: 4px;
        }

        /* Overlay - Fixed z-index */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* Section Toggle */
        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 90px;
            left: 20px;
            right: 20px;
            background: #333;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            z-index: 9999;
            font-weight: 600;
            text-align: center;
            transform: translateY(-100px);
            transition: transform 0.3s ease;
        }

        @media (min-width: 768px) {
            .toast {
                top: 30px;
                left: 50%;
                right: auto;
                transform: translateX(-50%) translateY(-100px);
                min-width: 300px;
            }

            .toast.show {
                transform: translateX(-50%) translateY(0);
            }
        }

        .toast.show {
            transform: translateY(0);
        }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        .loading i {
            font-size: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Hover Effects for Desktop */
        @media (min-width: 768px) {
            .header-icon:hover,
            .profile-avatar:hover,
            .profile-placeholder:hover {
                background: rgba(255,255,255,0.2);
            }

            .sidebar-cart-btn:hover {
                background: rgba(255,255,255,0.2);
            }
        }

        /* Safe Area */
        @supports (padding: max(0px)) {
            .mobile-header {
                padding-top: max(15px, env(safe-area-inset-top));
            }

            .mobile-nav {
                padding-bottom: max(8px, env(safe-area-inset-bottom));
            }
        }

        /* Scrollbar Styling for Desktop */
        @media (min-width: 768px) {
            ::-webkit-scrollbar {
                width: 8px;
            }

            ::-webkit-scrollbar-track {
                background: #f1f1f1;
            }

            ::-webkit-scrollbar-thumb {
                background: #c1c1c1;
                border-radius: 4px;
            }

            ::-webkit-scrollbar-thumb:hover {
                background: #a8a8a8;
            }
        }
    </style>
</head>
<body>
<!-- Desktop Sidebar -->
<aside class="desktop-sidebar">
    <div class="sidebar-header">
        <div class="sidebar-logo">Dev Store</div>
        <div class="sidebar-subtitle">Premium Fashion</div>
    </div>

    <div class="sidebar-profile" id="sidebarProfile" onclick="toggleProfile()">
        <div id="sidebarProfileAvatar">
            <!-- Profile avatar will be loaded here -->
        </div>
        <div class="sidebar-profile-info">
            <h4 id="sidebarProfileName">Foydalanuvchi</h4>
            <p id="sidebarProfileStatus">Faol</p>
        </div>
    </div>

    <nav class="sidebar-nav">
        <a href="#" class="sidebar-nav-item active" onclick="showSection('home')">
            <i class="fas fa-home"></i>
            <span>Bosh sahifa</span>
        </a>
        <a href="#" class="sidebar-nav-item" onclick="showSection('catalog')">
            <i class="fas fa-th-large"></i>
            <span>Katalog</span>
        </a>
        <a href="#" class="sidebar-nav-item" onclick="showSection('about')">
            <i class="fas fa-info-circle"></i>
            <span>Biz haqimizda</span>
        </a>
        <a href="#" class="sidebar-nav-item" onclick="showSection('contact')">
            <i class="fas fa-phone"></i>
            <span>Kontaktlar</span>
        </a>
    </nav>

    <div class="sidebar-cart">
        <button class="sidebar-cart-btn" onclick="toggleCart()">
            <i class="fas fa-shopping-bag"></i>
            <span>Savatcha (<span id="sidebarCartBadge">0</span>)</span>
        </button>
    </div>
</aside>

<!-- Desktop Main Content -->
<div class="desktop-main">
    <!-- Mobile Header -->
    <header class="mobile-header">
        <div class="header-left">
            <button class="menu-btn" onclick="toggleMenu()">
                <i class="fas fa-bars"></i>
            </button>
            <a href="#" class="logo" onclick="showSection('home')">DS</a>
        </div>
        <div class="header-right">
            <button class="header-icon" onclick="toggleSearch()">
                <i class="fas fa-search"></i>
            </button>
            <div id="profileContainer" onclick="toggleProfile()">
                <!-- Profile avatar will be loaded here -->
            </div>
            <button class="header-icon" onclick="toggleCart()">
                <i class="fas fa-shopping-bag"></i>
                <span class="cart-badge" id="cartBadge">0</span>
            </button>
        </div>
    </header>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Home Section -->
        <section id="home" class="section active">
            <!-- Enhanced Hero -->
            <div class="hero-section">
                <div class="hero-content">
                    <span class="hero-badge">20% GACHA CHEGIRMALAR</span>
                    <h1 class="hero-title">HAR KUN<br>UCHUN</h1>
                    <button class="hero-btn" onclick="showSection('catalog')">KO'Z TASHLASH</button>
                </div>
                <div class="hero-image">
                    <img src="static/t-shirt.jpeg" alt="Hero Image">
                </div>
            </div>

            <!-- Collection Section -->
            <div class="collection-section">
                <div class="collection-content">
                    <span class="collection-badge">NEW!</span>
                    <h2 class="collection-title">Simple Club S25 Collection</h2>
                    <button class="collection-btn" onclick="showSection('catalog')">BARCHASI</button>
                </div>

                <div class="collection-products">
                    <div class="collection-product" onclick="openQuickView(5)">
                        <span class="product-badge">NEW</span>
                        <img src="static/t-shirt.jpeg" alt="Ko'z Tegmasin" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Ko'z Tegmasin</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(8)">
                        <span class="product-badge">NEW</span>
                        <img src="static/t-shirt.jpeg" alt="Plashovka" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Plashovka</div>
                            <div class="collection-product-price">450,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(6)">
                        <img src="static/t-shirt.jpeg" alt="Yulduz Bol" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Yulduz Bol</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(7)">
                        <img src="static/t-shirt.jpeg" alt="Hammasi Good Bo'ladi" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Hammasi Good Bo'ladi</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                </div>

                <div class="collection-main-image">
                    <img src="static/t-shirt.jpeg" alt="Simple Club S25 Collection">
                </div>
            </div>

            <div class="collection-section">
                <div class="collection-content">
                    <span class="collection-badge">NEW!</span>
                    <h2 class="collection-title">Simple Club S24 Collection</h2>
                    <button class="collection-btn" onclick="showSection('catalog')">BARCHASI</button>
                </div>

                <div class="collection-products">
                    <div class="collection-product" onclick="openQuickView(5)">
                        <span class="product-badge">NEW</span>
                        <img src="static/t-shirt.jpeg" alt="Ko'z Tegmasin" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Ko'z Tegmasin</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(8)">
                        <span class="product-badge">NEW</span>
                        <img src="static/t-shirt.jpeg" alt="Plashovka" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Plashovka</div>
                            <div class="collection-product-price">450,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(6)">
                        <img src="static/t-shirt.jpeg" alt="Yulduz Bol" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Yulduz Bol</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(7)">
                        <img src="static/t-shirt.jpeg" alt="Hammasi Good Bo'ladi" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Hammasi Good Bo'ladi</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                </div>

                <div class="collection-main-image">
                    <img src="static/t-shirt.jpeg" alt="Simple Club S24 Collection">
                </div>
            </div>

            <div class="collection-section">
                <div class="collection-content">
                    <span class="collection-badge">NEW!</span>
                    <h2 class="collection-title">Simple Club S23 Collection</h2>
                    <button class="collection-btn" onclick="showSection('catalog')">BARCHASI</button>
                </div>

                <div class="collection-products">
                    <div class="collection-product" onclick="openQuickView(5)">
                        <span class="product-badge">NEW</span>
                        <img src="static/t-shirt.jpeg" alt="Ko'z Tegmasin" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Ko'z Tegmasin</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(8)">
                        <span class="product-badge">NEW</span>
                        <img src="static/t-shirt.jpeg" alt="Plashovka" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Plashovka</div>
                            <div class="collection-product-price">450,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(6)">
                        <img src="static/t-shirt.jpeg" alt="Yulduz Bol" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Yulduz Bol</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                    <div class="collection-product" onclick="openQuickView(7)">
                        <img src="static/t-shirt.jpeg" alt="Hammasi Good Bo'ladi" class="collection-product-image">
                        <div class="collection-product-overlay">
                            <button class="quick-view-btn">QUICK VIEW</button>
                        </div>
                        <div class="collection-product-info">
                            <div class="collection-product-name">Hammasi Good Bo'ladi</div>
                            <div class="collection-product-price">275,000 So'm</div>
                        </div>
                    </div>
                </div>

                <div class="collection-main-image">
                    <img src="static/t-shirt.jpeg" alt="Simple Club S23 Collection">
                </div>
            </div>
        </section>

        <!-- Catalog Section -->
        <section id="catalog" class="section">
            <div class="section-header">
                <h2 class="section-title">Katalog</h2>
                <p class="section-subtitle">Eng so'nggi kolleksiyalar</p>
            </div>

            <!-- Filter Section -->
            <div class="filter-section">
                <div class="filter-scroll">
                    <button class="filter-btn active" onclick="setFilter('all')">Barchasi</button>
                    <button class="filter-btn" onclick="setFilter('new')">Yangi</button>
                    <button class="filter-btn" onclick="setFilter('hot')">Mashhur</button>
                    <button class="filter-btn" onclick="setFilter('sale')">Chegirma</button>
                </div>

                <div class="search-container">
                    <input type="text" class="search-input" placeholder="Mahsulot qidirish..." id="searchInput" onkeyup="searchProducts()">
                </div>
            </div>

            <!-- Products Grid -->
            <div class="products-grid">
                <div class="products-container" id="allProducts">
                    <!-- Products will be loaded here -->
                </div>

                <!-- Pagination -->
                <div class="pagination-section" id="paginationSection">
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="section">
            <div class="section-header">
                <h2 class="section-title">Biz haqimizda</h2>
                <p class="section-subtitle">Dev Store - zamonaviy va sifatli kiyim-kechak do'koni</p>
            </div>
            <div style="padding: 20px;">
                <p style="font-size: 16px; line-height: 1.6; color: #666; text-align: center; max-width: 800px; margin: 0 auto;">
                    Biz 2020-yildan beri O'zbekiston bozorida faoliyat yuritamiz va mijozlarimizga eng sifatli mahsulotlarni taklif etamiz.
                    Bizning maqsadimiz - har bir mijozga o'ziga mos keladigan zamonaviy va sifatli kiyim-kechak topishda yordam berish.
                </p>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="section">
            <div class="section-header">
                <h2 class="section-title">Kontaktlar</h2>
                <p class="section-subtitle">Biz bilan bog'laning</p>
            </div>
            <div style="padding: 20px;">
                <p style="font-size: 16px; line-height: 1.6; color: #666; text-align: center;">
                    📞 +998 90 123 45 67<br>
                    📧 info@devstore.uz<br>
                    📍 Toshkent, O'zbekiston
                </p>
            </div>
        </section>
    </div>
</div>

<!-- Profile Modal -->
<div class="profile-modal" id="profileModal">
    <div class="profile-content">
        <div class="profile-header">
            <h3 class="profile-title">Profil</h3>
            <button class="close-cart" onclick="closeProfile()">×</button>
        </div>
        <div class="profile-body">
            <div class="profile-info">
                <div id="profileAvatarContainer">
                    <!-- Profile avatar will be loaded here -->
                </div>
                <div class="profile-name" id="profileName">Foydalanuvchi</div>
                <div class="profile-username" id="profileUsername">@username</div>
                <span class="profile-status" id="profileStatus">Faol</span>
            </div>

            <div class="profile-stats">
                <div class="profile-stat">
                    <div class="profile-stat-value" id="totalOrders">0</div>
                    <div class="profile-stat-label">Buyurtmalar</div>
                </div>
                <div class="profile-stat">
                    <div class="profile-stat-value" id="totalSpent">0</div>
                    <div class="profile-stat-label">Xarajat</div>
                </div>
            </div>

            <div class="profile-actions">
                <button class="profile-action-btn" onclick="showOrderHistory()">
                    <i class="fas fa-history"></i>
                    <span>Buyurtmalar tarixi</span>
                </button>
                <button class="profile-action-btn" onclick="showFavorites()">
                    <i class="fas fa-heart"></i>
                    <span>Sevimlilar</span>
                </button>
                <button class="profile-action-btn" onclick="showSettings()">
                    <i class="fas fa-cog"></i>
                    <span>Sozlamalar</span>
                </button>
                <button class="profile-action-btn" onclick="contactSupport()">
                    <i class="fas fa-headset"></i>
                    <span>Yordam</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Enhanced Quick View Modal -->
<div class="quick-view-modal" id="quickViewModal">
    <div class="quick-view-content">
        <div class="quick-view-header">
            <h3 class="quick-view-title">Quickview</h3>
            <button class="close-cart" onclick="closeQuickView()">×</button>
        </div>
        <div class="quick-view-body">
            <div class="quick-view-images-container">
                <img src="/t-shirt.jpeg" alt="Product" class="quick-view-main-image" id="quickViewMainImage">
                <div class="quick-view-thumbnails" id="quickViewThumbnails">
                    <!-- Thumbnails will be loaded here -->
                </div>
            </div>
            <div class="quick-view-details-container">
                <div class="quick-view-category" id="quickViewCategory">FUTBOLKALAR</div>
                <h3 class="quick-view-name" id="quickViewName">Mahsulot nomi</h3>
                <div class="quick-view-price" id="quickViewPrice">275,000 So'm</div>
                <p class="quick-view-description" id="quickViewDescription">Mahsulot tavsifi...</p>

                <div class="quick-view-divider"></div>

                <div class="quick-view-section">
                    <div class="quick-view-section-title">
                        Rang: <span class="quick-view-color-value" id="selectedColorName">Havorang</span>
                    </div>
                    <div class="quick-view-colors" id="quickViewColors">
                        <!-- Color options will be loaded here -->
                    </div>
                </div>

                <div class="quick-view-section">
                    <div class="quick-view-section-title">O'lcham</div>
                    <div class="quick-view-sizes" id="quickViewSizes">
                        <!-- Size options will be loaded here -->
                    </div>
                </div>

                <div class="quick-view-quantity">
                    <span class="quick-view-quantity-label">Miqdori:</span>
                    <div class="quick-view-quantity-controls">
                        <button class="quick-view-qty-btn" onclick="updateQuickViewQty(-1)">-</button>
                        <input type="number" class="quick-view-qty-value" id="quickViewQty" value="1" readonly>
                        <button class="quick-view-qty-btn" onclick="updateQuickViewQty(1)">+</button>
                    </div>
                </div>

                <button class="quick-view-add-btn" onclick="addToCartFromQuickView()">Savatga qo'shish</button>

                <div class="quick-view-divider"></div>

                <div class="quick-view-info">
                    <div class="quick-view-info-item">
                        <i class="fas fa-shopping-bag"></i>
                        <span>Kiyim havolasini nusxala!</span>
                    </div>
                    <div class="quick-view-info-item">
                        <i class="fas fa-bookmark"></i>
                        <span>Savol Berish</span>
                    </div>
                    <div class="quick-view-info-item">
                        <i class="fas fa-eye"></i>
                        <span id="viewCount">12 kishi mahsulotni hozir ko'rmoqda!</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Cart Sidebar -->
<div class="cart-sidebar" id="cartSidebar">
    <div class="cart-header">
        <h5>Savat</h5>
        <button class="close-cart" onclick="toggleCart()">×</button>
    </div>
    <div class="cart-items" id="cartItems">
        <!-- Cart items will be loaded here -->
    </div>
    <div class="cart-total">
        <div class="cart-summary">
            <span>Summa</span>
            <span id="cartTotal">0 so'm</span>
        </div>
        <div class="cart-buttons">
            <button class="checkout-btn" onclick="checkout()">Buyurtma qilish</button>
            <button class="continue-shopping-btn" onclick="toggleCart()">Savat</button>
        </div>
        <div class="cart-continue" onclick="toggleCart()">
            Yoki xaridlarni anti-to'xtatish
        </div>
    </div>
</div>

<!-- Mobile Navigation -->
<nav class="mobile-nav">
    <div class="mobile-nav-container">
        <a href="#" class="mobile-nav-item active" onclick="showSection('home')">
            <i class="fas fa-home"></i>
            <span>Bosh</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="showSection('catalog')">
            <i class="fas fa-th-large"></i>
            <span>Katalog</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="toggleCart()">
            <i class="fas fa-shopping-bag"></i>
            <span>Savatcha</span>
        </a>
        <a href="#" class="mobile-nav-item" onclick="showSection('about')">
            <i class="fas fa-info-circle"></i>
            <span>Biz haqimizda</span>
        </a>
    </div>
</nav>

<!-- Overlay -->
<div class="overlay" id="overlay" onclick="closeOverlay()"></div>

<script>
    // Enhanced Products data with multiple images and colors
    const products = [
        {
            id: 1,
            name: "Kargo Shim",
            price: 290000,
            category: "pants",
            images: [
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg",
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg"
            ],
            colors: [
                { name: "Havorang", image: "/static/t-shirt.jpeg", value: "#8B7355" },
                { name: "Qora", image: "/static/w-t-shirt.jpeg", value: "#000000" },
                { name: "Kulrang", image: "/static/t-shirt.jpeg", value: "#808080" }
            ],
            sizes: ["S", "M", "L", "XL", "XXL"],
            badge: "",
            description: "Havo o'tkazadigan materialdan tayyorlangan katta cho'ntakli kargo shimlar. Yumshoq va qulay materialdan tayyorlangan.",
            sku: "KS001"
        },
        {
            id: 2,
            name: "Kargo Shortik",
            price: 345000,
            category: "shorts",
            images: [
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg",
                "/static/t-shirt.jpeg"
            ],
            colors: [
                { name: "Havorang", image: "/static/t-shirt.jpeg", value: "#8B7355" },
                { name: "Qora", image: "/static/w-t-shirt.jpeg", value: "#000000" }
            ],
            sizes: ["S", "M", "L", "XL"],
            badge: "",
            description: "Yozgi fasl uchun ideal kargo shortiklar. Qulay va zamonaviy dizayn.",
            sku: "KSH002"
        },
        {
            id: 3,
            name: "Velvet Shim",
            price: 380000,
            category: "pants",
            images: [
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg",
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg"
            ],
            colors: [
                { name: "Kulrang", image: "/static/t-shirt.jpeg", value: "#808080" },
                { name: "Qora", image: "/static/w-t-shirt.jpeg", value: "#000000" }
            ],
            sizes: ["M", "L", "XL", "XXL"],
            badge: "",
            description: "Yumshoq velvet materialdan tayyorlangan shimlar. Premium sifat va zamonaviy dizayn.",
            sku: "VS003"
        },
        {
            id: 4,
            name: "Har Kun Uchun",
            price: 230000,
            category: "bags",
            images: [
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg"
            ],
            colors: [
                { name: "Qora", image: "/static/t-shirt.jpeg", value: "#000000" },
                { name: "Kulrang", image: "/static/w-t-shirt.jpeg", value: "#808080" }
            ],
            sizes: ["One Size"],
            badge: "HOT",
            description: "Har kunlik foydalanish uchun qulay sumka. Keng va amaliy dizayn.",
            sku: "HKU004"
        },
        {
            id: 5,
            name: "Ko'z Tegmasin",
            price: 275000,
            category: "shirts",
            images: [
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg",
                "/static/t-shirt.jpeg"
            ],
            colors: [
                { name: "Kulrang", image: "/static/t-shirt.jpeg", value: "#808080" },
                { name: "Qora", image: "/static/w-t-shirt.jpeg", value: "#000000" },
                { name: "Oq", image: "/static/t-shirt.jpeg", value: "#FFFFFF" }
            ],
            sizes: ["S", "M", "L", "XL"],
            badge: "NEW",
            description: "Zamonaviy dizayndagi futbolka. Yumshoq va qulay material.",
            sku: "KT005"
        },
        {
            id: 6,
            name: "Yulduz Bol",
            price: 275000,
            category: "shirts",
            images: [
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg",
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg"
            ],
            colors: [
                { name: "Qora", image: "/static/t-shirt.jpeg", value: "#000000" },
                { name: "Havorang", image: "/static/w-t-shirt.jpeg", value: "#8B7355" }
            ],
            sizes: ["S", "M", "L", "XL"],
            badge: "",
            description: "Futbolka sifatli paxtadan tayyorlangan yupqa djinsi materialidan tayyorlangan.",
            sku: "YB006"
        },
        {
            id: 7,
            name: "Hammasi Good Bo'ladi",
            price: 275000,
            category: "shirts",
            images: [
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg"
            ],
            colors: [
                { name: "Oq", image: "/static/t-shirt.jpeg", value: "#FFFFFF" },
                { name: "Qora", image: "/static/w-t-shirt.jpeg", value: "#000000" }
            ],
            sizes: ["S", "M", "L", "XL"],
            badge: "",
            description: "Ijobiy xabar bilan futbolka. Motivatsion dizayn va yuqori sifat.",
            sku: "HGB007"
        },
        {
            id: 8,
            name: "Plashovka Simple.Club",
            price: 450000,
            category: "jackets",
            images: [
                "/static/t-shirt.jpeg",
                "/static/w-t-shirt.jpeg",
                "/static/t-shirt.jpeg"
            ],
            colors: [
                { name: "Havorang", image: "/static/t-shirt.jpeg", value: "#8B7355" },
                { name: "Qora", image: "/static/w-t-shirt.jpeg", value: "#000000" }
            ],
            sizes: ["M", "L", "XL", "XXL"],
            badge: "NEW",
            description: "Zamonaviy plashovka Simple.Club kolleksiyasidan. Suv o'tkazmaydigan material.",
            sku: "PSC008"
        }
    ];

    let cart = [];
    let filteredProducts = [...products];
    let currentQuickViewProduct = null;
    let quickViewQty = 1;
    let currentPage = 1;
    const itemsPerPage = 6;
    let userProfile = null;
    let selectedColorIndex = 0;
    let selectedSizeIndex = 0;

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        loadProducts();
        updateCartDisplay();
        initTelegramWebApp();
        loadUserProfile();
    });

    // Telegram WebApp initialization
    function initTelegramWebApp() {
        if (window.Telegram && window.Telegram.WebApp) {
            const tg = window.Telegram.WebApp;
            tg.ready();
            tg.expand();

            // Set theme colors
            if (tg.themeParams.bg_color) {
                document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color);
            }
            if (tg.themeParams.text_color) {
                document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color);
            }

            // Enable haptic feedback
            tg.HapticFeedback.impactOccurred('light');
        }
    }

    // Load user profile from Telegram
    function loadUserProfile() {
        if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe.user) {
            const user = window.Telegram.WebApp.initDataUnsafe.user;
            userProfile = {
                id: user.id,
                firstName: user.first_name || 'Foydalanuvchi',
                lastName: user.last_name || '',
                username: user.username || '',
                photoUrl: user.photo_url || null,
                languageCode: user.language_code || 'uz',
                isPremium: user.is_premium || false
            };
        } else {
            // Fallback for testing outside Telegram
            userProfile = {
                id: 12345,
                firstName: 'Test',
                lastName: 'User',
                username: 'testuser',
                photoUrl: null,
                languageCode: 'uz',
                isPremium: false
            };
        }

        updateProfileDisplay();
        loadUserStats();
    }

    // Update profile display in header, sidebar and modal
    function updateProfileDisplay() {
        const profileContainer = document.getElementById('profileContainer');
        const sidebarProfileAvatar = document.getElementById('sidebarProfileAvatar');
        const profileAvatarContainer = document.getElementById('profileAvatarContainer');
        const profileName = document.getElementById('profileName');
        const profileUsername = document.getElementById('profileUsername');
        const profileStatus = document.getElementById('profileStatus');
        const sidebarProfileName = document.getElementById('sidebarProfileName');
        const sidebarProfileStatus = document.getElementById('sidebarProfileStatus');

        if (userProfile) {
            // Header profile
            if (userProfile.photoUrl) {
                profileContainer.innerHTML = `<img src="${userProfile.photoUrl}" alt="Profile" class="profile-avatar">`;
                sidebarProfileAvatar.innerHTML = `<img src="${userProfile.photoUrl}" alt="Profile" class="sidebar-profile-avatar">`;
            } else {
                const initials = (userProfile.firstName.charAt(0) + (userProfile.lastName.charAt(0) || '')).toUpperCase();
                profileContainer.innerHTML = `<div class="profile-placeholder">${initials}</div>`;
                sidebarProfileAvatar.innerHTML = `<div class="sidebar-profile-placeholder">${initials}</div>`;
            }

            // Modal profile
            if (userProfile.photoUrl) {
                profileAvatarContainer.innerHTML = `<img src="${userProfile.photoUrl}" alt="Profile" class="profile-avatar-large">`;
            } else {
                const initials = (userProfile.firstName.charAt(0) + (userProfile.lastName.charAt(0) || '')).toUpperCase();
                profileAvatarContainer.innerHTML = `<div class="profile-avatar-placeholder">${initials}</div>`;
            }

            const fullName = `${userProfile.firstName} ${userProfile.lastName}`.trim();
            profileName.textContent = fullName;
            sidebarProfileName.textContent = fullName;

            profileUsername.textContent = userProfile.username ? `@${userProfile.username}` : `ID: ${userProfile.id}`;

            const statusText = userProfile.isPremium ? 'Premium' : 'Faol';
            profileStatus.textContent = statusText;
            sidebarProfileStatus.textContent = statusText;

            profileStatus.style.background = userProfile.isPremium ? '#ffd700' : '#e8f5e8';
            profileStatus.style.color = userProfile.isPremium ? '#8b6914' : '#2d5a2d';
        }
    }

    // Load user statistics (mock data for demo)
    function loadUserStats() {
        // In a real app, this would fetch from your backend
        const mockStats = {
            totalOrders: Math.floor(Math.random() * 20) + 1,
            totalSpent: Math.floor(Math.random() * 5000000) + 100000
        };

        document.getElementById('totalOrders').textContent = mockStats.totalOrders;
        document.getElementById('totalSpent').textContent = formatPrice(mockStats.totalSpent);
    }

    // Profile functions
    function toggleProfile() {
        const modal = document.getElementById('profileModal');
        const overlay = document.getElementById('overlay');

        modal.classList.toggle('active');
        overlay.classList.toggle('active');

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
        }
    }

    function closeProfile() {
        document.getElementById('profileModal').classList.remove('active');
        document.getElementById('overlay').classList.remove('active');
    }

    function showOrderHistory() {
        showToast('Buyurtmalar tarixi ochilmoqda...');
        // In a real app, this would navigate to order history
    }

    function showFavorites() {
        showToast('Sevimlilar ro\'yxati ochilmoqda...');
        // In a real app, this would show favorites
    }

    function showSettings() {
        showToast('Sozlamalar ochilmoqda...');
        // In a real app, this would open settings
    }

    function contactSupport() {
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.openTelegramLink('https://t.me/your_support_bot');
        } else {
            showToast('Yordam xizmati bilan bog\'lanish...');
        }
    }

    // Load products
    function loadProducts() {
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        const paginatedProducts = filteredProducts.slice(startIndex, endIndex);

        const container = document.getElementById('allProducts');

        if (paginatedProducts.length === 0) {
            container.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <i class="fas fa-search"></i>
                        <p>Hech qanday mahsulot topilmadi</p>
                    </div>
                `;
        } else {
            container.innerHTML = paginatedProducts.map(product => createProductCard(product)).join('');
        }

        updatePagination();
    }

    // Create product card
    function createProductCard(product) {
        return `
                <div class="product-card" onclick="openQuickView(${product.id})">
                    <div class="product-image-container">
                        <img src="${product.images[0]}" alt="${product.name}" class="product-image">
                        <img src="${product.images[1] || product.images[0]}" alt="${product.name}" class="product-image-secondary">
                        ${product.badge ? `<span class="product-badge">${product.badge}</span>` : ''}
                    </div>
                    <div class="product-info">
                        <h6 class="product-name">${product.name}</h6>
                        <div class="product-price">${formatPrice(product.price)}</div>
                        <button class="quick-view-product-btn" onclick="event.stopPropagation(); openQuickView(${product.id})">
                            Quick view
                        </button>
                    </div>
                </div>
            `;
    }

    // Show section
    function showSection(sectionName) {
        document.querySelectorAll('.section').forEach(section => {
            section.classList.remove('active');
        });

        document.getElementById(sectionName).classList.add('active');

        // Update mobile nav
        document.querySelectorAll('.mobile-nav-item').forEach(item => {
            item.classList.remove('active');
        });

        // Update desktop sidebar nav
        document.querySelectorAll('.sidebar-nav-item').forEach(item => {
            item.classList.remove('active');
        });

        const currentNavItem = document.querySelector(`.mobile-nav-item[onclick*="${sectionName}"]`);
        const currentSidebarItem = document.querySelector(`.sidebar-nav-item[onclick*="${sectionName}"]`);

        if (currentNavItem) {
            currentNavItem.classList.add('active');
        }
        if (currentSidebarItem) {
            currentSidebarItem.classList.add('active');
        }

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
        }
    }

    // Filter functions
    function setFilter(type) {
        document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        if (type === 'all') {
            filteredProducts = [...products];
        } else {
            filteredProducts = products.filter(product => product.badge.toLowerCase() === type);
        }

        currentPage = 1;
        loadProducts();

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
        }
    }

    function searchProducts() {
        const query = document.getElementById('searchInput').value.toLowerCase();
        filteredProducts = products.filter(product =>
            product.name.toLowerCase().includes(query) ||
            product.description.toLowerCase().includes(query)
        );
        currentPage = 1;
        loadProducts();
    }

    // Enhanced Quick View functions
    function openQuickView(productId) {
        const product = products.find(p => p.id === productId);
        if (!product) return;

        currentQuickViewProduct = product;
        quickViewQty = 1;
        selectedColorIndex = 0;
        selectedSizeIndex = 0;

        // Update product details
        document.getElementById('quickViewName').textContent = product.name;
        document.getElementById('quickViewPrice').textContent = formatPrice(product.price);
        document.getElementById('quickViewDescription').textContent = product.description;
        document.getElementById('quickViewQty').value = quickViewQty;
        document.getElementById('quickViewCategory').textContent = getCategoryName(product.category);

        // Update main image
        document.getElementById('quickViewMainImage').src = product.images[0];

        // Load thumbnails
        loadQuickViewThumbnails(product);

        // Load colors
        loadQuickViewColors(product);

        // Load sizes
        loadQuickViewSizes(product);

        // Update view count
        document.getElementById('viewCount').textContent = `${Math.floor(Math.random() * 50) + 5} kishi mahsulotni hozir ko'rmoqda!`;

        document.getElementById('quickViewModal').classList.add('active');
        document.getElementById('overlay').classList.add('active');

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
        }
    }

    function loadQuickViewThumbnails(product) {
        const container = document.getElementById('quickViewThumbnails');
        container.innerHTML = product.images.map((image, index) => `
      <img src="${image}" alt="${product.name}" class="quick-view-thumbnail ${index === 0 ? 'active' : ''}"
           onclick="selectQuickViewImage(${index})">
    `).join('');
    }

    function selectQuickViewImage(index) {
        if (!currentQuickViewProduct) return;

        document.getElementById('quickViewMainImage').src = currentQuickViewProduct.images[index];

        // Update thumbnail active state
        document.querySelectorAll('.quick-view-thumbnail').forEach((thumb, i) => {
            thumb.classList.toggle('active', i === index);
        });
    }

    function loadQuickViewColors(product) {
        const container = document.getElementById('quickViewColors');
        const colorNameElement = document.getElementById('selectedColorName');

        container.innerHTML = product.colors.map((color, index) => `
      <div class="quick-view-color ${index === 0 ? 'active' : ''}" onclick="selectQuickViewColor(${index})">
        <img src="${color.image}" alt="${color.name}">
      </div>
    `).join('');

        // Set initial color name
        colorNameElement.textContent = product.colors[0].name;
    }

    function selectQuickViewColor(index) {
        if (!currentQuickViewProduct) return;

        selectedColorIndex = index;
        const selectedColor = currentQuickViewProduct.colors[index];

        // Update color name
        document.getElementById('selectedColorName').textContent = selectedColor.name;

        // Update main image to color's image
        document.getElementById('quickViewMainImage').src = selectedColor.image;

        // Update color active state
        document.querySelectorAll('.quick-view-color').forEach((color, i) => {
            color.classList.toggle('active', i === index);
        });

        // Update thumbnails to show this color's images
        loadQuickViewThumbnails(currentQuickViewProduct);
    }

    function loadQuickViewSizes(product) {
        const container = document.getElementById('quickViewSizes');
        container.innerHTML = product.sizes.map((size, index) => `
      <div class="quick-view-size ${index === 0 ? 'active' : ''}" onclick="selectQuickViewSize(${index})">
        ${size}
      </div>
    `).join('');
    }

    function selectQuickViewSize(index) {
        selectedSizeIndex = index;

        // Update size active state
        document.querySelectorAll('.quick-view-size').forEach((size, i) => {
            size.classList.toggle('active', i === index);
        });
    }

    function closeQuickView() {
        document.getElementById('quickViewModal').classList.remove('active');
        document.getElementById('overlay').classList.remove('active');
        currentQuickViewProduct = null;
    }

    function updateQuickViewQty(change) {
        quickViewQty = Math.max(1, quickViewQty + change);
        document.getElementById('quickViewQty').value = quickViewQty;

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
        }
    }

    function addToCartFromQuickView() {
        if (!currentQuickViewProduct) return;

        const selectedColor = currentQuickViewProduct.colors[selectedColorIndex];
        const selectedSize = currentQuickViewProduct.sizes[selectedSizeIndex];

        const cartItem = {
            ...currentQuickViewProduct,
            quantity: quickViewQty,
            selectedColor: selectedColor.name,
            selectedSize: selectedSize,
            cartId: `${currentQuickViewProduct.id}-${selectedColorIndex}-${selectedSizeIndex}`
        };

        const existingItem = cart.find(item => item.cartId === cartItem.cartId);

        if (existingItem) {
            existingItem.quantity += quickViewQty;
        } else {
            cart.push(cartItem);
        }

        updateCartDisplay();
        closeQuickView();
        showToast('Mahsulot savatga qo\'shildi!');

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
        }
    }

    // Cart functions - Fixed mobile issues
    function toggleCart() {
        const sidebar = document.getElementById('cartSidebar');
        const overlay = document.getElementById('overlay');

        // Close other modals first
        closeQuickView();
        closeProfile();

        sidebar.classList.toggle('open');
        overlay.classList.toggle('active');

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
        }
    }

    function addToCart(productId) {
        const product = products.find(p => p.id === productId);
        const cartItem = {
            ...product,
            quantity: 1,
            selectedColor: product.colors[0].name,
            selectedSize: product.sizes[0],
            cartId: `${product.id}-0-0`
        };

        const existingItem = cart.find(item => item.cartId === cartItem.cartId);

        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push(cartItem);
        }

        updateCartDisplay();
        showToast('Mahsulot savatga qo\'shildi!');

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
        }
    }

    function updateCartDisplay() {
        const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
        document.getElementById('cartBadge').textContent = totalItems;
        document.getElementById('sidebarCartBadge').textContent = totalItems;

        const container = document.getElementById('cartItems');

        if (cart.length === 0) {
            container.innerHTML = `
        <div class="empty-state">
          <i class="fas fa-shopping-bag"></i>
          <p>Savatcha bo'sh</p>
        </div>
      `;
            document.getElementById('cartTotal').textContent = '0 so\'m';
            return;
        }

        container.innerHTML = cart.map(item => `
      <div class="cart-item">
        <div class="cart-item-image">
          <img src="${item.images[0]}" alt="${item.name}">
        </div>
        <div class="cart-item-info">
          <div class="cart-item-name">${item.name}</div>
          <div class="cart-item-variant">${item.selectedColor}</div>
          <div class="cart-item-size">${item.selectedSize} ( bo'y ${getSizeHeight(item.selectedSize)} )</div>
          <div class="cart-item-price">
            ${formatPrice(item.price)}
            <span class="cart-item-quantity">×${item.quantity}</span>
          </div>
        </div>
        <button class="cart-item-remove" onclick="removeFromCart('${item.cartId}')">×</button>
      </div>
    `).join('');

        const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        document.getElementById('cartTotal').textContent = formatPrice(total);
    }

    function getSizeHeight(size) {
        const sizeHeights = {
            'S': '150-162',
            'M': '163-170',
            'L': '163-175',
            'XL': '176-187',
            'XXL': '188-195',
            'One Size': '160-190'
        };
        return sizeHeights[size] || '';
    }

    function updateQuantity(cartId, change) {
        const item = cart.find(item => item.cartId === cartId);
        if (item) {
            item.quantity += change;
            if (item.quantity <= 0) {
                removeFromCart(cartId);
            } else {
                updateCartDisplay();
            }
        }

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
        }
    }

    function removeFromCart(cartId) {
        cart = cart.filter(item => item.cartId !== cartId);
        updateCartDisplay();

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
        }
    }

    function checkout() {
        if (cart.length === 0) {
            showToast('Savatcha bo\'sh!');
            return;
        }

        if (window.Telegram && window.Telegram.WebApp) {
            const tg = window.Telegram.WebApp;
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

            tg.sendData(JSON.stringify({
                action: 'checkout',
                cart: cart,
                total: total,
                user: userProfile
            }));

            tg.HapticFeedback.notificationOccurred('success');
        } else {
            showToast('Buyurtma qabul qilindi!');
        }

        cart = [];
        updateCartDisplay();
        toggleCart();
    }

    // Helper functions
    function getCategoryName(category) {
        const categoryNames = {
            'shirts': 'FUTBOLKALAR',
            'pants': 'SHIMLAR',
            'shorts': 'SHORTIKLAR',
            'jackets': 'KURTKALAR',
            'bags': 'SUMKALAR'
        };
        return categoryNames[category] || category.toUpperCase();
    }

    function formatPrice(price) {
        return new Intl.NumberFormat('uz-UZ').format(price) + ' So\'m';
    }

    function showToast(message) {
        const existingToast = document.querySelector('.toast');
        if (existingToast) {
            existingToast.remove();
        }

        const toast = document.createElement('div');
        toast.className = 'toast';
        toast.textContent = message;
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.classList.add('show');
        }, 100);

        setTimeout(() => {
            toast.classList.remove('show');
            setTimeout(() => {
                if (toast.parentNode) {
                    toast.parentNode.removeChild(toast);
                }
            }, 300);
        }, 3000);
    }

    function updatePagination() {
        const totalPages = Math.ceil(filteredProducts.length / itemsPerPage);
        const paginationContainer = document.getElementById('paginationSection');

        if (totalPages <= 1) {
            paginationContainer.innerHTML = '';
            return;
        }

        let paginationHTML = '';

        if (currentPage > 1) {
            paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage - 1})">‹</button>`;
        }

        for (let i = 1; i <= totalPages; i++) {
            paginationHTML += `<button class="pagination-btn ${i === currentPage ? 'active' : ''}" onclick="changePage(${i})">${i}</button>`;
        }

        if (currentPage < totalPages) {
            paginationHTML += `<button class="pagination-btn" onclick="changePage(${currentPage + 1})">›</button>`;
        }

        paginationContainer.innerHTML = paginationHTML;
    }

    function changePage(page) {
        currentPage = page;
        loadProducts();

        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });

        // Haptic feedback
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
        }
    }

    function toggleSearch() {
        const searchInput = document.getElementById('searchInput');
        searchInput.focus();
        showSection('catalog');
    }

    function toggleMenu() {
        // Menu functionality can be added here
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
        }
    }

    function closeOverlay() {
        document.getElementById('overlay').classList.remove('active');
        document.getElementById('cartSidebar').classList.remove('open');
        document.getElementById('quickViewModal').classList.remove('active');
        document.getElementById('profileModal').classList.remove('active');
    }

    // Touch events for better mobile experience
    document.addEventListener('touchstart', function() {}, { passive: true });

    // Prevent zoom on double tap
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
            event.preventDefault();
        }
        lastTouchEnd = now;
    }, false);

    // Close modals on outside click
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('quick-view-modal')) {
            closeQuickView();
        }
        if (e.target.classList.contains('profile-modal')) {
            closeProfile();
        }
        if (e.target.classList.contains('overlay')) {
            closeOverlay();
        }
    });
</script>
</body>
</html>
